<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Document</title>
  </head>

  <body>
    <button onclick="" subscribe()>subscribe</button>

    <script>
      addEventListener('load', async () => {
        let sw = await navigator.serviceWorker.register('./sw.js')
        console.log(sw)
      })

      async function subscribe() {
        let sw = await navigator.serviceWorker.ready
        let push = await sw.pushManager.subscribe({
          userVisibleOnly: true,
          applicationServerKey: 'BB0qbereDjQyDGo5GNfNExawk8ZDNk8iwU99coqXaadXCDJ5UZLPIkDgZtsUWbFanTxWoqGWs8QAj',
        })

        console.log(JSON.stringify(push))
      }
    </script>
  </body>
</html>
